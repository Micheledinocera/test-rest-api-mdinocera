(function(t){function e(e){for(var i,a,r=e[0],c=e[1],u=e[2],l=0,m=[];l<r.length;l++)a=r[l],o[a]&&m.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0a52":function(t,e,n){},"1dc3":function(t,e,n){"use strict";var i=n("2c83"),o=n.n(i);o.a},"24f6":function(t,e,n){},"2c83":function(t,e,n){},"53f8":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("notifications",{attrs:{group:"notifications",position:"top left"}}),n("VueLoading",{attrs:{active:t.visible,"can-cancel":!0,"is-full-page":!0,loader:"dots"},on:{"update:active":function(e){t.visible=e}}}),""!=t.getAdmin.name?n("div",{staticClass:"info"},[n("div",[t._v(" Sei loggato come "+t._s(t.getAdmin.name)+" - ")]),""==t.getAdmin.ownerName?n("div",[t._v(" Scegli un Owner ")]):n("div",[t._v(" Sei nella stanza di "+t._s(t.getAdmin.ownerName))]),n("button",{staticClass:"btn no-icon",on:{click:t.logOut}},[t._v(" LOGOUT ")])]):t._e(),n("nav",[n("router-link",{attrs:{to:"/"}},[t._v("Admin")]),t.getAdmin.isLoggedIn?n("router-link",{attrs:{to:"/skills"}},[t._v("Classifica")]):t._e(),t.getAdmin.isLoggedIn?n("router-link",{attrs:{to:"/points"}},[t._v("History")]):t._e()],1),n("router-view")],1)},s=[],a=n("cebc"),r=n("faa1"),c=new r["EventEmitter"],u=n("2f62"),d=n("9062"),l=n.n(d),m={name:"app",components:{VueLoading:l.a},data:function(){return{}},created:function(){c.on("notify-error-rest",this.notifyErrorRestHandler)},methods:Object(a["a"])({notifyErrorRestHandler:function(t){this.$notify(t)}},Object(u["b"])(["logout"]),{logOut:function(){var t=this;this.logout().then(function(){return t.$router.push("/")})}}),computed:Object(a["a"])({},Object(u["c"])(["getAdmin"]),{visible:function(){return this.$store.getters.getVisible}})},p=m,f=(n("dda2"),n("2877")),v=Object(f["a"])(p,o,s,!1,null,null,null),g=v.exports,h=n("9f7b"),b=n.n(h),_=n("7bb1"),w=n("ee98"),O=n.n(w),E=n("8c4f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("div",{staticClass:"holder"},["admin"==t.getAdmin.type?n("form",{on:{submit:function(e){return e.preventDefault(),t.addItem(e)}}},[n("transition",{attrs:{name:"alert-in","enter-active-class":"animated flipInX","leave-active-class":"animated flipOutX"}},[t.errors.has("skill")?n("p",{staticClass:"alert"},[t._v(t._s(t.errors.first("skill")))]):t._e()]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.skill,expression:"skill"},{name:"validate",rawName:"v-validate",value:"min:5",expression:"'min:5'"}],attrs:{type:"text",placeholder:"Enter an user name here...",name:"skill"},domProps:{value:t.skill},on:{input:function(e){e.target.composing||(t.skill=e.target.value)}}})],1):t._e(),n("ul",[n("transition-group",{attrs:{name:"list","enter-active-class":"animated bounceInUp","leave-active-class":"animated bounceOutDown"}},t._l(t.users.users,function(e,i){return n("li",{key:"users"+i},[e.isEditing?n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}}):n("span",[t._v(t._s(i+1)+" . "+t._s(e.name)+" : "+t._s(e.points))]),n("button",{staticClass:"btn delete",on:{click:function(n){return t.deleteItem(e.id)}}}),e.isEditing?n("button",{staticClass:"btn done",on:{click:function(n){return t.renameItem(e)}}}):n("button",{staticClass:"btn edit",on:{click:function(n){return t.editItem(e)}}})])}),0)],1),!t.users.users.length>0?n("p",[t._v("Add some users. :(")]):t._e()])])},j=[],k={name:"Skills",data:function(){return{skill:""}},computed:Object(a["a"])({},Object(u["d"])(["users"]),Object(u["c"])(["getAdmin"])),mounted:function(){this.$store.dispatch("getUsers")},methods:{deleteItem:function(t){this.$store.dispatch("deleteUser",t)},editItem:function(t){t.isEditing=!0},renameItem:function(t){this.$store.dispatch("updateUser",t)},addItem:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.$store.dispatch("addUser",t.skill):t.$notify({group:"notifications",title:"Warning",text:"Not valid input",type:"warn"})})}}},A=k,I=(n("e51f"),Object(f["a"])(A,y,j,!1,null,"15253dcc",null)),x=I.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",[n("transition-group",{attrs:{name:"list","enter-active-class":"animated bounceInUp","leave-active-class":"animated bounceOutDown"}},t._l(t.transictions.transictions,function(e,i){return n("li",{key:"transaction"+i},[n("span",[t._v(t._s(e.created_on)+" "+t._s(e.name)+" - "+t._s(e.description)+" : "+t._s(e.points))])])}),0)],1)])},T=[],C={name:"Points",computed:Object(a["a"])({},Object(u["d"])(["transictions"])),mounted:function(){this.$store.dispatch("getTransictions")}},N=C,P=(n("1dc3"),Object(f["a"])(N,U,T,!1,null,"4b0ffc1d",null)),F=P.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["admin"==t.getAdmin.type?n("div",[n("b-form-select",{model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},t._l(t.users.users,function(e,i){return n("option",{key:"names"+i,domProps:{value:e.id}},[t._v(t._s(e.name))])}),0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.points,expression:"points"}],attrs:{type:"number",placeholder:"Points"},domProps:{value:t.points},on:{input:function(e){e.target.composing||(t.points=e.target.value)}}}),n("button",{staticClass:"btn no-icon moreOrLess",attrs:{disabled:""==t.points},on:{click:function(e){t.points=-1*parseInt(t.points)}}},[t._v(" +/- ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{type:"text",placeholder:"Description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),n("button",{staticClass:"btn save",attrs:{disabled:""==t.description||""==t.points},on:{click:t.saveTransition}}),n("button",{staticClass:"btn send",attrs:{disabled:""==t.id||""==t.description||""==t.points},on:{click:function(e){return t.sendTransition(t.description,t.points)}}}),n("ul",{attrs:{id:"favorites"}},[n("transition-group",{attrs:{name:"list","enter-active-class":"animated bounceInUp","leave-active-class":"animated bounceOutDown"}},t._l(t.favorites.favorites,function(e,i){return n("li",{key:"favorite"+i},[n("span",[t._v(t._s(e.name)+" : "+t._s(e.points))]),n("button",{staticClass:"btn send",attrs:{disabled:""==t.id},on:{click:function(n){return t.sendTransition(e.name,e.points)}}}),n("button",{staticClass:"btn delete",on:{click:function(n){return t.deleteItem(e.id)}}})])}),0)],1)],1):"user"==t.getAdmin.type?n("div",[n("ul",{attrs:{id:"users"}},[n("transition-group",{attrs:{name:"list","enter-active-class":"animated bounceInUp","leave-active-class":"animated bounceOutDown"}},t._l(t.getAdmin.users,function(e,i){return n("li",{key:"user"+i},[n("span",[t._v(" "+t._s(e.ownername)+" ")]),n("button",{staticClass:"btn send",on:{click:function(n){return t.setAdminId({id:e.id,ownerName:e.ownername})}}})])}),0)],1)]):n("div",[n("div",[n("div",[t._v(" Fai il login ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("button",{staticClass:"btn send",on:{click:function(e){return t.login({username:t.username,password:t.password})}}})]),n("div",[t._v(" oppure ")]),n("div",[n("div",[t._v(" Crea un nuovo Owner ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.usernameRegistration,expression:"usernameRegistration"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:t.usernameRegistration},on:{input:function(e){e.target.composing||(t.usernameRegistration=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordRegistration,expression:"passwordRegistration"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.passwordRegistration},on:{input:function(e){e.target.composing||(t.passwordRegistration=e.target.value)}}}),n("button",{staticClass:"btn send",on:{click:function(e){return t.register({username:t.usernameRegistration,password:t.passwordRegistration})}}})])])])},$=[],D={name:"Admin",data:function(){return{username:"",password:"",usernameRegistration:"",passwordRegistration:"",description:"",points:"",id:""}},computed:Object(a["a"])({},Object(u["d"])(["users","favorites"]),Object(u["c"])(["getAdmin","getFavorites"])),mounted:function(){this.$store.dispatch("getUsers"),this.getFavorites()},methods:Object(a["a"])({},Object(u["b"])(["login","addTransiction","addFavorite","register","setAdminId","getFavorites"]),{deleteItem:function(t){this.$store.dispatch("deleteFavorite",t)},sendTransition:function(t,e){this.addTransiction({user_id:this.id,description:t,points:e,owner_id:this.getAdmin.id}).then(function(){c.emit("notify-error-rest",{group:"notifications",title:"Transiction Complete",type:"success"})})},saveTransition:function(){this.addFavorite({name:this.description,points:this.points})}})},L=D,M=(n("9b28"),Object(f["a"])(L,R,$,!1,null,"b5336f1a",null)),S=M.exports;i["default"].use(E["a"]);var G=new E["a"]({routes:[{path:"/skills",name:"skills",component:x},{path:"/points",name:"points",component:F},{path:"/",name:"admin",component:S}]}),J=(n("7f7f"),n("ac6a"),n("795b")),H=n.n(J),V=n("d225"),Y=n("b0b4"),B=n("bd86"),X=function(){function t(){Object(V["a"])(this,t)}return Object(Y["a"])(t,null,[{key:"timeConverter",value:function(e){var n=new Date(e),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=n.getFullYear(),s=i[n.getMonth()],a=n.getDate(),r=t.pad2(n.getHours()),c=t.pad2(n.getMinutes()),u=t.pad2(n.getSeconds()),d=a+" "+s+" "+o+" "+r+":"+c+":"+u;return d}}]),t}();Object(B["a"])(X,"BASEURL","https://test-rest-api-mdinocera.herokuapp.com/api/"),Object(B["a"])(X,"pad2",function(t){return(t<10?"0":"")+t}),Object(B["a"])(X,"EMPTY_ADMIN",{isLoggedIn:!1,name:"",type:"",id:0,ownerName:""});var z=n("bc3a"),W=n.n(z),q=n("a7fe"),K=n.n(q);i["default"].use(K.a,W.a);var Q=W.a.create({baseURL:X.BASEURL});Q.interceptors.response.use(function(t){return t},function(t){return c.emit("notify-error-rest",{group:"notifications",title:void 0!=t.response?"CODE:"+t.response.statusText+" - "+t.response.statusText:"ERROR",text:void 0!=t.response?t.response.data.message:t.message+" for rest call at url: "+(void 0!=t.response?t.response.config.url:t.config.url),type:"error"}),H.a.reject(t)});var Z=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(V["a"])(this,t),Object(B["a"])(this,"name",""),Object(B["a"])(this,"id",0),Object(B["a"])(this,"points",0),Object(B["a"])(this,"isEditing",!1),this.name=e.name?e.name:"",this.id=e.id?e.id:0,this.points=e.points?e.points:0},tt={state:{users:[]},getters:{getUsers:function(t){return t.users}},mutations:{setUsers:function(t,e){return t.users=e}},actions:{getUsers:function(t){t.commit("loadingEvent",!0),Q.post("users",{owner_id:t.rootGetters.getAdmin.id}).then(function(e){var n=[];e.data.forEach(function(t){return n.push(new Z(t))}),t.commit("setUsers",n)}).then(function(){return t.commit("loadingEvent",!1)})},deleteUser:function(t,e){t.commit("loadingEvent",!0),Q.delete("user/"+e).then(function(){t.dispatch("getUsers")}).then(function(){return t.commit("loadingEvent",!1)})},updateUser:function(t,e){t.commit("loadingEvent",!0),Q.put("user/update",{id:e.id,name:e.name}).then(function(){t.dispatch("getUsers")}).then(function(){return t.commit("loadingEvent",!1)})},addUser:function(t,e){t.commit("loadingEvent",!0),Q.post("user",{id:t.rootGetters.getAdmin.id,name:e}).then(function(){t.dispatch("getUsers")}).then(function(){return t.commit("loadingEvent",!1)})}}},et=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(V["a"])(this,t),Object(B["a"])(this,"name",""),Object(B["a"])(this,"points",0),Object(B["a"])(this,"id",0),Object(B["a"])(this,"description",""),Object(B["a"])(this,"created_on",""),this.name=e.name?e.name:"",this.id=e.id?e.id:0,this.description=e.description?e.description:"",this.points=e.points?e.points:0,this.created_on=e.created_on?X.timeConverter(Date(1e3*e.created_on)):""},nt={state:{transictions:[]},getters:{getTransictions:function(t){return t.transictions}},mutations:{setTransictions:function(t,e){return t.transictions=e}},actions:{getTransictions:function(t){t.commit("loadingEvent",!0),Q.post("transitions",{owner_id:t.rootGetters.getAdmin.id}).then(function(e){var n=[];e.data.forEach(function(t){return n.push(new et(t))}),t.commit("setTransictions",n)}).then(function(){return t.commit("loadingEvent",!1)})},addTransiction:function(t,e){t.commit("loadingEvent",!0),e.id=Q.post("user/points",e).then(function(){t.dispatch("getTransictions")}).then(function(){return t.commit("loadingEvent",!1)})}}},it=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(V["a"])(this,t),Object(B["a"])(this,"id",0),Object(B["a"])(this,"points",0),Object(B["a"])(this,"created_on",""),Object(B["a"])(this,"name",""),this.name=e.description?e.description:"",this.created_on=e.created_on?e.created_on:"",this.points=e.points?e.points:0,this.id=e.id?e.id:0},ot={state:{favorites:[]},getters:{getFavorites:function(t){return t.favorites}},mutations:{setFavorites:function(t,e){return t.favorites=e}},actions:{getFavorites:function(t){t.commit("loadingEvent",!0),Q.post("favorites",{id:t.rootGetters.getAdmin.id}).then(function(e){var n=[];e.data.forEach(function(t){return n.push(new it(t))}),t.commit("setFavorites",n)}).then(function(){return t.commit("loadingEvent",!1)})},deleteFavorite:function(t,e){t.commit("loadingEvent",!0),Q.delete("favorite/"+e).then(function(e){var n=[];e.data.forEach(function(t){return n.push(new it(t))}),t.commit("setFavorites",n)}).then(function(){return t.commit("loadingEvent",!1)})},updateFavorite:function(t,e){t.commit("loadingEvent",!0),Q.post("favorite/update",{id:e.id,points:e.points,description:e.name}).then(function(e){var n=[];e.data.forEach(function(t){return n.push(new it(t))}),t.commit("setFavorites",n)}).then(function(){return t.commit("loadingEvent",!1)})},addFavorite:function(t,e){t.commit("loadingEvent",!0),Q.post("favorite",{points:e.points,description:e.name,id:t.rootGetters.getAdmin.id}).then(function(e){var n=[];e.data.forEach(function(t){return n.push(new it(t))}),t.commit("setFavorites",n)}).then(function(){return t.commit("loadingEvent",!1)})}}};i["default"].use(u["a"]);var st=new u["a"].Store({state:{visible:!1,admin:X.EMPTY_ADMIN},getters:{getVisible:function(t){return t.visible},getAdmin:function(t){return t.admin}},actions:{loadingEvent:function(t,e){return t.commit("loadingEvent",e)},setAdminId:function(t,e){return t.commit("setAdminId",e)},login:function(t,e){t.commit("loadingEvent",!0),Q.post("owner/login",e).then(function(e){t.commit("login",e.data)}).then(function(){t.dispatch("getFavorites")}).then(function(){c.emit("notify-error-rest",{group:"notifications",title:"Login Complete",type:"success"})}).catch(function(){return t.commit("loadingEvent",!1)}).then(function(){return t.commit("loadingEvent",!1)})},register:function(t,e){t.commit("loadingEvent",!0),Q.post("owner",e).then(function(){t.dispatch("login",e)}).catch(function(){return t.commit("loadingEvent",!1)}).then(function(){return t.commit("loadingEvent",!1)})},logout:function(t){return t.commit("logout")}},mutations:{loadingEvent:function(t,e){return t.visible=e},setAdminId:function(t,e){t.admin.id=e.id,t.admin.ownerName=e.ownerName},login:function(t,e){return t.admin=""==e?{isLoggedIn:!0,name:"dummy",ownerName:"dummy",type:"admin",id:2}:"admin"==e.type?{isLoggedIn:!0,name:e.username,type:e.type,ownerName:e.username,id:e.id}:{isLoggedIn:!0,name:e[0].name,type:"user",ownerName:"",id:0,users:e}},logout:function(t){return t.admin=X.EMPTY_ADMIN}},modules:{users:tt,transictions:nt,favorites:ot}});n("f9e3"),n("2dd8");i["default"].use(b.a),i["default"].use(_["a"]),i["default"].use(O.a),i["default"].config.productionTip=!1,new i["default"]({router:G,store:st,render:function(t){return t(g)}}).$mount("#app")},"9b28":function(t,e,n){"use strict";var i=n("0a52"),o=n.n(i);o.a},dda2:function(t,e,n){"use strict";var i=n("53f8"),o=n.n(i);o.a},e51f:function(t,e,n){"use strict";var i=n("24f6"),o=n.n(i);o.a}});
//# sourceMappingURL=app.09e40ef2.js.map